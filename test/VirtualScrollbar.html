<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<title>VirtualScrollbar Test</title>
		<style>
			@import "../../dojo/resources/dojo.css";
			@import "../css/dgrid.css";
			@import "../css/skins/claro.css";

			body {
				background-color: rgb(36, 36, 36);
				color: rgb(44, 110, 173);
			}

			.dgrid {
				height: 600px;
				width: 800px;
			}

			.field-id {
				width: 140px;
			}

			.claro .dgrid-list .dgrid-row {
				border-bottom: 1px solid rgb(17, 19, 20);
				padding: 6px;
			}

			.claro .dgrid {
				color: rgb(44, 110, 173);
				font-size: 16px;
			}

			.claro .dgrid-header,
			.claro .dgrid-row {
				background-image: none;
			}

			.claro .dgrid-header {
				background-color: rgb(25, 31, 37);
				color: rgb(93, 165, 235);
			}

			.claro .dgrid-header .dgrid-cell:hover {
				background: rgb(34, 55, 75);
			}

			.claro .dgrid,
			.claro .dgrid-preload,
			.claro .dgrid-row {
				background-color: rgb(44, 44, 44);
			}

			.claro .dgrid-cell {
				border-color: rgb(17, 19, 20);
				padding: 6px;
			}

			.claro .dgrid-row:hover {
				background-color: rgb(52, 45, 35);
			}

			.container {
				display: flex;
				justify-content: center;
				margin: 20px;
			}
		</style>
	</head>

	<body class="claro">
		<div class="container">
			<div style="margin-right: 20px">
				<h1>OnDemandGrid with 500,000 rows</h2>
				<div id="grid"></div>
			</div>

			<div>
				<h1>VirtualScrollbar with 1,000,000,000,000 rows</h2>
				<div id="gigaGrid"></div>
			</div>
		</div>

		<script src="../../dojo/dojo.js" data-dojo-config="async: true"></script>

		<script>
			require([
				'dojo/_base/declare',
				'dojo/dom',
				'dgrid/OnDemandList',
				'dgrid/OnDemandGrid',
				'dgrid/extensions/VirtualScrollbar',
				'dgrid/test/data/ImaginaryStore'
			], function(declare, dom, OnDemandList, OnDemandGrid, VirtualScrollbar, ImaginaryStore) {
				var VSList = declare([OnDemandList, VirtualScrollbar]);
				var VSGrid = declare([OnDemandGrid, VirtualScrollbar]);
				var bigStore = new ImaginaryStore(500000); // one million is likely to crash the browser
				//var GIGAstore = new ImaginaryStore(1000000000000); // one trillion
				//var GIGAstore = new ImaginaryStore(10000000);
				var GIGAstore = new ImaginaryStore(5000);

				var compare = false;
				var list = false;
				var gridColumns = {
					id: {
						label: 'ID',
						sortable: false
					},
					name: {
						label: 'Name',
						get: function(item) {
							return 'Item ' + (new Number(item.id)).toLocaleString();
						},
						sortable: false
					},
					time: {
						label: 'Time',
						get: function() {
							return (new Date()).toLocaleString();
						},
						sortable: false
					}
				};

				if (compare) {
					window.grid = new OnDemandGrid({
						collection: bigStore,
						columns: gridColumns
					}, dom.byId('grid'));
				}

				if (list) {
					//window.list = new OnDemandList({
					window.list = new VSList({
						debug: false,
						//pagingMethod: 'debounce',
						//pagingDelay: 250,
						collection: GIGAstore,
						renderRow: function(item) {
							var row = document.createElement('div');

							row.textContent = 'Row ' + item.id;

							return row;
						}
					}, dom.byId('gigaGrid'));
				}
				else {
					window.gigaGrid = new VSGrid({
						debug: false,
						collection: GIGAstore,
						columns: gridColumns
					}, dom.byId('gigaGrid'));
				}
			});
		</script>
	</body>
</html>
